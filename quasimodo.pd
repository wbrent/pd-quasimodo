#N canvas 103 187 725 653 12;
#X declare -path ./lib;
#X obj 127 65 adc~ 2;
#X obj 127 545 dac~ 2;
#N canvas 605 126 499 437 init 0;
#X obj 55 44 loadbang;
#X msg 55 302 \; pd dsp 1 \;;
#X obj 246 366 declare -path ./lib;
#X msg 168 127 \; remote-direct-gain-set -24 \; remote-amplification-gain-set
-12 \; local-mic-gain-set -6 \;;
#X obj 55 68 t b b b;
#X msg 108 207 \; delay-lfo-speed-set 10 \; delay-lfo-depth-set 100
\;;
#X connect 0 0 4 0;
#X connect 4 0 1 0;
#X connect 4 1 5 0;
#X connect 4 2 3 0;
#X restore 487 79 pd init;
#X obj 47 105 vumeter;
#N canvas 730 490 547 387 variable-delay 0;
#X obj 23 36 inlet~;
#X obj 23 306 outlet~;
#N canvas 1028 167 498 300 delay-write 0;
#X msg 84 115 clear;
#X obj 41 46 inlet~;
#X obj 41 236 outlet~;
#X obj 84 90 r delay-lfo-clear;
#X obj 41 151 delwrite~ \$0-quasi-delay 5000;
#X connect 0 0 4 0;
#X connect 1 0 4 0;
#X connect 3 0 0 0;
#X restore 23 109 pd delay-write;
#N canvas 1186 67 551 552 delay-read 0;
#X obj 41 46 inlet~;
#X obj 41 486 outlet~;
#X obj 41 426 delread4~ \$0-quasi-delay 1000;
#X obj 170 9 r delay-lfo-speed;
#X obj 170 223 osc~;
#X obj 170 247 *~;
#X obj 170 83 pack f 1000;
#X obj 170 107 line~;
#X obj 290 203 pack f 1000;
#X obj 290 227 line~;
#X obj 290 251 *~ 0.5;
#X obj 170 271 +~;
#X obj 170 295 +~ 50;
#X obj 170 33 / 100;
#X text 223 293 minimum delay is 50ms;
#X obj 290 109 r delay-lfo-depth;
#X obj 290 133 / 100;
#X text 355 130 convert from percent to 50ms less than the delay buffer
size, f 22;
#X obj 367 378 metro 100;
#X obj 367 402 snapshot~;
#X floatatom 117 97 5 0 0 0 - - -;
#X obj 170 57 * 0.05;
#X text 226 41 convert from percent to 0.05Hz;
#X obj 290 157 * 4950;
#X obj 367 486 s delay-lfo-deltime;
#X obj 367 348 loadbang;
#X obj 367 426 + 0.5;
#X obj 367 450 i;
#X connect 2 0 1 0;
#X connect 3 0 13 0;
#X connect 4 0 5 0;
#X connect 5 0 11 0;
#X connect 6 0 7 0;
#X connect 7 0 4 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 10 0 5 1;
#X connect 10 0 11 1;
#X connect 11 0 12 0;
#X connect 12 0 2 0;
#X connect 12 0 19 0;
#X connect 13 0 21 0;
#X connect 15 0 16 0;
#X connect 16 0 23 0;
#X connect 18 0 19 0;
#X connect 19 0 26 0;
#X connect 21 0 6 0;
#X connect 21 0 20 0;
#X connect 23 0 8 0;
#X connect 25 0 18 0;
#X connect 26 0 27 0;
#X connect 27 0 24 0;
#X restore 23 186 pd delay-read;
#X floatatom 210 130 5 0 100 1 delay-lfo-speed delay-lfo-speed-set
delay-lfo-speed;
#X floatatom 210 160 5 0 100 1 delay-lfo-depth delay-lfo-depth-set
delay-lfo-depth;
#X obj 380 160 bng 15 250 50 0 delay-lfo-clear delay-lfo-clear-set
c 17 7 0 12 -261234 -1 -1;
#X floatatom 380 130 5 0 0 1 ms delay-lfo-deltime -;
#X connect 0 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 1 0;
#X coords 0 -1 1 1 240 85 1 200 100;
#X restore 127 425 pd variable-delay;
#N canvas 1147 148 725 380 capture-local-mic-signal 0;
#X obj 40 291 outlet~;
#X obj 40 51 inlet~;
#X obj 304 130 dbtorms;
#X obj 304 154 pack f 40;
#X obj 304 178 line~;
#X obj 230 122 *~;
#X obj 40 75 +~;
#X floatatom 460 125 5 -100 12 1 local-mic-gain local-mic-gain-set
local-mic-gain;
#X obj 304 60 r local-mic-gain;
#X text 243 229 Here \, we capture the local mic signal and mix it
with the remote-direct signal. Note that the mic signal will contain
the room-amplified version of the remote signal as well.;
#X obj 230 52 inlet~;
#X obj 304 84 + 100;
#X connect 1 0 6 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 5 1;
#X connect 5 0 6 1;
#X connect 6 0 0 0;
#X connect 8 0 11 0;
#X connect 10 0 5 0;
#X connect 11 0 2 0;
#X coords 0 -1 1 1 240 50 1 450 100;
#X restore 127 345 pd capture-local-mic-signal;
#N canvas 196 108 939 391 receive-from-previous-player 0;
#X obj 41 291 outlet~;
#X obj 41 51 inlet~;
#X text 228 26 First \, we receive audio from the previous link in
the chain and send it straight out to the local loudspeaker;
#X obj 305 160 dbtorms;
#X obj 305 184 pack f 40;
#X obj 305 208 line~;
#X obj 231 152 *~;
#X floatatom 560 130 5 -100 12 1 remote-direct-gain remote-direct-gain-set
remote-direct-gain;
#X obj 115 160 dbtorms;
#X obj 115 184 pack f 40;
#X obj 115 208 line~;
#X obj 41 152 *~;
#X floatatom 560 160 5 -100 12 1 remote-amplification-gain remote-amplification-gain-set
remote-amplification-gain;
#X obj 231 252 outlet~;
#X obj 115 90 r remote-direct-gain;
#X obj 305 90 r remote-amplification-gain;
#X obj 305 114 + 100;
#X obj 115 114 + 100;
#X connect 1 0 6 0;
#X connect 1 0 11 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 6 1;
#X connect 6 0 13 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 10 0 11 1;
#X connect 11 0 0 0;
#X connect 14 0 17 0;
#X connect 15 0 16 0;
#X connect 16 0 3 0;
#X connect 17 0 8 0;
#X coords 0 -1 1 1 240 85 1 550 100;
#X restore 127 125 pd receive-from-previous-player;
#X obj 360 231 dac~ 1;
#X obj 360 301 adc~ 1;
#X obj 400 341 vumeter;
#X text 124 26 Route the previous player's JackTrip receive to this
input of Pd (pure_data:input1), f 45;
#X text 417 229 << route this signal (pure_data:output0) to your local
loudspeaker, f 40;
#X text 417 299 << route your local mic to this input of Pd (pure_data:input0)
, f 32;
#X text 124 576 Route this signal (pure_data:output1) to the next player's
JackTrip send, f 39;
#X connect 0 0 6 0;
#X connect 0 0 3 0;
#X connect 4 0 1 0;
#X connect 5 0 4 0;
#X connect 6 0 5 0;
#X connect 6 1 7 0;
#X connect 8 0 9 0;
#X connect 8 0 5 1;
